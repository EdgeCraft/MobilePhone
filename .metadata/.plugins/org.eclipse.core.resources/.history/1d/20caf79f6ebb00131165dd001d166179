package org.exodevil.MobilePhone.listeners;

import net.edgecraft.edgecore.EdgeCoreAPI;
import net.edgecraft.edgecore.user.User;
import net.edgecraft.edgecore.user.UserManager;

import org.bukkit.Bukkit;
import org.bukkit.entity.Player;
import org.exodevil.MobilePhone.Billing;
import org.exodevil.MobilePhone.MobilePhone;

public class WatchCostsTask {
	private final static UserManager userManager = EdgeCoreAPI.userAPI();
	
	
	public static void Watch (final Player player, final Player receiver){

		final User u = userManager.getUser(player.getName());
		final int id = u.getID();
			Bukkit.getScheduler().scheduleSyncRepeatingTask(MobilePhone.getInstance(), new Runnable() {
				@Override
				public void run() {
					long endCall = System.currentTimeMillis();
					Billing.calcTime(endCall, u);
				}
			}, 0L, 5*20L);
			
	}
	
	
	
}
