package org.exodevil.MobilePhone.listeners;

import net.edgecraft.edgecore.EdgeCoreAPI;
import net.edgecraft.edgecore.user.User;
import net.edgecraft.edgecore.user.UserManager;

import org.bukkit.Bukkit;
import org.bukkit.entity.Player;
import org.exodevil.MobilePhone.Billing;
import org.exodevil.MobilePhone.MobilePhone;

public class WatchCostsTask {
	private final static UserManager userManager = EdgeCoreAPI.userAPI();
	
	
	public static void Watch (final int pID, final int recID){
		final User p = userManager.getUser(pID);
		final User rec = userManager.getUser(recID);
		final Player player = Bukkit.getPlayer(p.getName());
		final Player receiver = Bukkit.getPlayer(rec.getName());
			Bukkit.getScheduler().scheduleSyncRepeatingTask(MobilePhone.getInstance(), new Runnable() {
				@Override
				public void run() {
					long endCall = System.currentTimeMillis();
					double time = Billing.calcTime(endCall, p);
					double costs = Billing.calcCosts(userID, time);
				}
			}, 0L, 30*20L);
			
	}
	
	
	
}
